title:Installing Andromeda on Ubuntu 13.04
parent:Linux
sequence:400
aliases:


<p>
These are the complete instructions for installing Andromeda onto
   Ubuntu 13.04 aka Raring Ringtail.  These instructions are meant to
   require minimal knowledge of Linux.
</p>

<h2>Preliminary Steps</h2>

<p>
Go to the command line and add yourself to the www-data group:
</p>


<h2>Step 1: Install Packages and Make Directories</h2>

<p><b>Step 1.1 Install Packages</b>.  Enter the following command to
install all required packages from Ubuntu:</p>

<pre class="cli">sudo apt-get install apache2 php5 php5-pgsql php-pear postgresql-9.1 perl postgresql-plperl-9.1 subversion libnet-smtp-server-perl libapache2-mod-suphp php5-cgi
</pre>

<p><b>Step 1.2 Install Pear Packages</b>.  This command installs a 
package we need from the PEAR repository:</p>

<pre class="cli">sudo pear install Net_SMTP
</pre>


<p><b>Step 1.3 Enable Apache Modules</b>.  Now we must enable certain
Apache modules.  Note carefully that all three commands below must end
with a trailing backslash.

</p><pre class="cli">sudo a2enmod rewrite
    sudo a2enmod suphp
</pre></p>

<p><b>Step 1.4 Prepare Andromeda Directory</b>.  These commands get
the directory ready for Andromeda:</p>

<pre class="cli">cd ~
mkdir -p public_html/andro_root/sessions
</pre>

<h2>Step 2 Configurations</h2>

<p><b>Step 2.1 Change PHP Configuration</b>.  PHP by default only allows
a script to run for thirty seconds.  A database build can sometimes take
up to 5 minutes on very complex databases, so we need to expand the time
allowed.
</p>

<pre class="cli">sudo nano ~/public_html/andro_root/php.ini
</pre>

<p>Add the following to the newly created file</p>

<pre class="cli">
    max_execution_time=0
    session.save_path=/home/[user]/public_html/andro_root/sessions/
</pre>


<p><b>Step 2.2 Change Postgres Configuration file pg_hba.conf</b>.  Open the
file /etc/postgresql/9.1/main/pg_hba.conf:</p>

<pre class="cli">sudo nano /etc/postgresql/9.1/main/pg_hba.conf
</pre>

<p>...and replace it with this:</p>

<pre>local       all       postgres                 ident map=andromeda
host        all       +root     127.0.0.1/32   password
local       all       +root                    password
local       samename  all                      password
local       samegroup all                      password
</pre>

<p><b>Step 2.3 Change Postgres Configuraton file pg_ident.conf</b>.  Open
the file /etc/postgresql/9.1/main/pg_ident.conf:</p>

<pre class="cli">sudo gedit /etc/postgresql/9.1/main/pg_ident.conf
</pre>

<p>...and replace it with this:</p>

<pre>andromeda     postgres          postgres
andromeda     root              postgres
</pre>

<p><b>Step 2.4 Change Postgres Configuraton file posgresql.conf</b>.  Open
the file /etc/postgresql/9.1/main/postgresql.conf:</p>

<pre class="cli">sudo gedit /etc/postgresql/9.1/main/postgresql.conf
</pre>

<p>...and uncomment the line that sets "listen_addresses='localhost'".

</p>

<p><b>Step 2.5 Create Apache Virtual Host</b></p>


<pre class="cli">
    sudo nano /etc/apache2/sites-available/andro-node
</pre>

<p>Place the following inside the newly created file</p>

<pre class="cli">
    &lt;VirtualHost *:80&gt;
        DocumentRoot /home/[user]/public_html/andro_root/andro
        suPHP_ConfigPath /home/[user]/public_html/andro_root/

        &lt;Directory /&gt;
            Options FollowSymLinks
            AllowOverride All
        &lt;/Directory&gt;

        &lt;Directory /home/[user]/public_html/andro_root/andro/&gt;
            Options Indexed FollowSymLinks MultiViews
            AllowOverride All
            Order allow,deny
            allow from all
        &lt;/Directory&gt;

         ErrorLog ${APACHE_LOG_DIR}/andro-node-error.log

         LogLevel warn
         CustomLog ${APACHE_LOG_DIR}/andro-node-access.log combined
    &lt;/VirtualHost&gt;
</pre>
<p><i>**Note:  you will need to do this for each Andromeda application**</i></p>

<p>Now you will need to enable that virtual host using the following command</p>

<pre class="cli">sudo a2ensite andro-node</pre>
<p><i>**Note:  you will need to do this for each Andromeda application**</i></p>

<p><b>Edit Hosts file</b></p>

<pre class="cli">sudo nano /etc/hosts</pre>

<p>Add the following to the first line with 127.0.0.1</p>

<pre class="cli">andro.local</pre>

<p>**Note:  you will need to do this for each Andromeda application**</p>

<p><b>Step 2.6 Modify suphp.conf</b></p>

<pre class="cli">
   sudo nano /etc/suphp/suphp.conf
</pre>

<p>Find the line for check_vhost_docroot and change it to the following</p>
<pre class="cli">check_vhost_docroot=false
</pre>

<p>Find the line for allow_file_group_writable and change it to the following:</p>
<pre class="cli">allow_file_group_writable=true
</pre>

<p>Find the line for allow_directory_group_writable and change it to the following:</p>
<pre class="cli">allow_directory_group_writable=true
</pre>

<pre class="cli">http://andro.googlecode.com/svn/releases/[latest_release]/
</pre>

<h2>Step 3: Restarts and Final Commands</h2>

<p><b>Step 3.1 Restart Postgres</b>.  Type in the following
command to restart Postgres:</p>

<pre class="cli">
sudo /etc/init.d/postgresql restart
</pre>

<p><b>Step 3.2 Create Andromeda Superuser</b>.  Now it is time to enter
the Postgres command line utility and create your superuser account
and create an empty database for Andromeda.  Remember the username and
password you pick here, you will need it for many Andromeda activities.</p>

<pre class="cli">sudo su - postgres
psql

# create role root nologin;
# create user USER_NAME superuser password 'PASSWORD';
# grant root to USER_NAME;
# create database andro;
# create language plperlu;
# create language plperl;
# \q

exit
</pre>

<h2>Step 4: Install Andromeda</h2>

<p>Download latest Andromeda Release:
</p>

<p>Go to <a href="https://andro.googlecode.com/svn/releases">https://andro.googlecode.com/svn/releases</a> to check
    for the latest release, and then export it via subversion using the following command
</p>

<pre class="cli">cd ~/public_html/andro_root/
svn export https://andro.googlecode.com/svn/releases/[latest_release] andro
</pre>

<p>Exucute the following commands</p>
<pre class="cli">cd andro/application
mv install.php.done install.php
</pre>

<p><b>Restart Apache</b></p>

<pre class="cli">sudo /etc/init.d/apache2 restart</pre>

<p>Point your browser to:</p>

<p><a href="http://andro.local">http://andro.local/</a>
</p>

<p>...and follow the instructions on-screen to initialize and begin using
Andromeda!</p>
