title:Andromeda HTML Templates
parent:
sequence:11100
aliases:


<p>An HTML template is the top level file (and associated files)
   that determines a site's overall look.  It contains the main
   HTML file, links to framework JS and CSS files, and possibly
   some JS and CSS files of its own.
</p>

<p>We use the term "HTML Template" to distinguish these from
   the [[Smarty Templates]] that are also supported as part of
   the [[androPage]] feature.
</p>

<h2>Joomla Compatibility</h2>

<p>Andromeda's default theme, named "rt_pixel", was generously
   provided by 
   <a href="http://www.rockettheme.com">http://www.rockettheme.com</a>
   and is a Joomla 1.0 template.  
</p>

<p>Andromeda mimics a small set of the Joomla 1.0 API so that Joomla
   1.0 templates can be dropped in and used for Andromeda sites, though
   they usually require a couple of hours of modifications to eliminate
   or handle calls to unsupported features.
</p>

<h2>File Locations and Name</h2>

<p>A template should be placed into your application's "templates"
   directory.  The name of the template is the name of the directory.
</p>

<p>The only required file is "index.php" in the template's directory,
   such as ".../templates/my_example/index.php.  Any other files can
   be created and named as you choose.
</p>
   
<p>Be warned that the
   templates directory is publicly visible to the browser, all files
   in it can be viewed by the user.  You can prevent access to individual
   files directly from the browser with this code:
</p>

<pre><span class="syntax0"><span class="syntax9">defined</span><span class="syntax18">(</span> <span class="syntax13">'</span><span class="syntax13">_VALID_MOS</span><span class="syntax13">'</span> <span class="syntax18">)</span> 
    <span class="syntax18">or</span> <span class="syntax8">die</span><span class="syntax18">(</span> <span class="syntax13">'</span><span class="syntax13">Direct</span><span class="syntax13"> </span><span class="syntax13">Access</span><span class="syntax13"> </span><span class="syntax13">to</span><span class="syntax13"> </span><span class="syntax13">this</span><span class="syntax13"> </span><span class="syntax13">location</span><span class="syntax13"> </span><span class="syntax13">is</span><span class="syntax13"> </span><span class="syntax13">not</span><span class="syntax13"> </span><span class="syntax13">allowed.</span><span class="syntax13">'</span> <span class="syntax18">)</span><span class="syntax18">;</span>
</span></pre>

<h2>Selecting A Template</h2>

<p>Andromeda will by default always choose the "rt_pixel" template if
   it is present.  
</p>

<p>To force a selection of your own template when the user first hits
   the site, put this code into your [[applib.php]] program.  This works
   only on the very first hit to the site.
</p>

<pre><span class="syntax0"><span class="syntax10">$GLOBALS</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">AG</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">template</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">=</span><span class="syntax13">'</span><span class="syntax13">my_template</span><span class="syntax13">'</span><span class="syntax18">;</span>
</span></pre>
   
<p>To force a selection of a different template on all subsequent hits
   to the site, set the session variable:
</p>

<pre><span class="syntax0"><span class="syntax6">SessionSet</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">TEMPLATE</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">my_example</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
</span></pre>

<p>Once a template has been selected it is used until you force
   a change by writing to the session TEMPLATE variable.
</p>

<h2>Structure of a Template</h2>

<p>The minimum template is here:</p>

<pre><span class="syntax0"><span class="syntax17">&lt;!</span><span class="syntax9">DOCTYPE</span><span class="syntax9"> </span><span class="syntax9">html</span><span class="syntax9"> </span><span class="syntax9">PUBLIC</span><span class="syntax9"> </span><span class="syntax13">&quot;</span><span class="syntax13">-//W3C//DTD</span><span class="syntax13"> </span><span class="syntax13">XHTML</span><span class="syntax13"> </span><span class="syntax13">1.0</span><span class="syntax13"> </span><span class="syntax13">Transitional//EN</span><span class="syntax13">&quot;</span><span class="syntax9"> </span>
<span class="syntax9"> </span><span class="syntax9"> </span><span class="syntax9"> </span><span class="syntax9"> </span><span class="syntax13">&quot;</span><span class="syntax13">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="syntax17">&lt;html</span><span class="syntax17"> </span><span class="syntax17">xmlns</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">http</span><span class="syntax14">:</span><span class="syntax14">/</span><span class="syntax14">/</span><span class="syntax14">www</span><span class="syntax14">.</span><span class="syntax14">w3</span><span class="syntax14">.</span><span class="syntax14">org</span><span class="syntax14">/</span><span class="syntax14">1999</span><span class="syntax14">/</span><span class="syntax14">xhtml</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
    <span class="syntax1">&lt;!--</span><span class="syntax1"> </span><span class="syntax1">NO</span><span class="syntax1"> </span><span class="syntax1">TITLE</span><span class="syntax1">!</span><span class="syntax1"> </span><span class="syntax1">It</span><span class="syntax1"> </span><span class="syntax1">is</span><span class="syntax1"> </span><span class="syntax1">output</span><span class="syntax1"> </span><span class="syntax1">in</span><span class="syntax1"> </span><span class="syntax1">androHTMLHead</span><span class="syntax1">.</span><span class="syntax1">php</span><span class="syntax1">--&gt;</span>
    
    <span class="syntax1">&lt;!--</span><span class="syntax1"> </span><span class="syntax1">This</span><span class="syntax1"> </span><span class="syntax1">must</span><span class="syntax1"> </span><span class="syntax1">be</span><span class="syntax1"> </span><span class="syntax1">the</span><span class="syntax1"> </span><span class="syntax1">last</span><span class="syntax1"> </span><span class="syntax1">line</span><span class="syntax1"> </span><span class="syntax1">in</span><span class="syntax1"> </span><span class="syntax1">the</span><span class="syntax1"> </span><span class="syntax1">HEAD</span><span class="syntax1"> </span><span class="syntax1">section</span><span class="syntax1"> </span><span class="syntax1">--&gt;</span>
    <span class="syntax17">&lt;?php</span> <span class="syntax8">include</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">androHTMLHead.php</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax17">?&gt;</span>
<span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="syntax17">&lt;body</span><span class="syntax17">&gt;</span>

<span class="syntax17">&lt;?</span><span class="syntax18">=</span><span class="syntax6">mosMainBody</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax17">?&gt;</span>

<span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="syntax17">&lt;?php</span> <span class="syntax8">include</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">androHTMLFoot.php</span><span class="syntax13">'</span><span class="syntax18">)</span> <span class="syntax17">?&gt;</span>
<span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span>
</span></pre>

<p>There are a few rules to keep in mind:</p>

<ul><li>Do not output a TITLE element
    <li>The androHTMLHead.php include should be the last line in the HEAD
    <li>Use "mosMainBody()" to output the main content of the page
    <li>Include androHTMLFoot.php at the very end
</ul>

<h2>Adding CSS and JS Files</h2>

<p>Template layout has evolved to keep pace with developments in
   web performance.  In particular a template should assist in getting
   a good grade for the 
   <a href="http://developer.yahoo.com/yslow/help/">YSlow! utility</a>.
</p>

<p>With that in mind, Andromeda has a framework utility for outputting
   Javascript files, which is jsInclude().  Call this routine with the
   relative path of your javascript file, such as 
   "jsInclude('appclib/myjsfile.js')" or
   "jsInclude('templates/my_template/js/templatejs.js')".
</p>

<p>A similar routine is used for css files, such as 
   "cssInclude('templates/my_template/my_template.css')".
</p>

<p>Note that JS files are not actually put out in the HEAD section, they
   are output at the very bottom to improve performance and the user
   experience.
</p>

<p>Note that CSS files are not output individually, but are combined
   and sent to the browser in a single file, to improve performance
   and the user experience.
</p>

<p>If the system variable [[JS_CSS_DEBUG]] is set to 'Y', Javascript
   files and css files are sent individually, so you can look through
   them and debug them.  If that variable does not exist or is 'N'
   then the CSS files are combined into one, and the JS files are 
   minified and combined into a single file.
</p>

<p>Both jsInclude() and cssInclude() accept a second parameter, which,
  if true, forces an immediate output of the file regardless of the
  setting of JS_CSS_DEBUG.  This may be necessary for CSS
  files that specify background images with the URL() function, since
  the paths in those rules will get mangled and will not work in a combined
  file.</p>


