<h1>Andromeda Documentation</h1>

<h2>If You Want To Download The Documentation</h2>

<p>If you wish to download this documentation, including user
   comments, the simplest way is to use the "wget" command
   (or some Windows equivalent) and capture the entire
   contents of http://www.andromeda-project.org.  This
   command will give you what you want:
</p>

<pre class="code">
$ cd /some/directory
$ wget -nH -r -k http://www.andromeda-project.org/
</pre>

<p>The switches used will have the following effects:
</p>
<ul><li>The "-nH" option will put the docs directly into the
        directory you are sitting in.  If you leave this out,
        wget will make a directory called www.andromeda-project.org
        and put the docs there.
    <li>The "-r" option makes a recursive download.
    <li>The "-k" option converts all of the links after download
        so that they point to the files on your local machine.
        This gives you complete off-line access to the docs.
</ul>

<p>You can repeat this command as often as desired to fetch a
   local copy of the latest documentation.
</p>

<h2>Features of the Documentation System</h2>

<p>The Andromeda Documentation is managed by an Andromeda application
   named "adocsrobo".  Its main purpose is to allow for ROBODOC style
   documentation in code, integrated with pages created by hand
   (such as this one), and incorporating user comments.  The specific
   features are:
</p>

<ul><li>Reading of ROBODOC style comment blocks from source code.  The
    program that does this is robophp.php program, which duplicates
    the features of ROBODOC that we need and incorporates the other
    features listed here.
    <li>Integration of manually created pages.
    <li>Allow for moderated user comments.
    <li>Automatically create Index and Table of Contents.
    <li>Track file and line number of each ROBODOC block, produce
        a list of file.
</ul>

<h2>Technical Details</h2>


<h3>Sourceforge Repository</h3>

<p>The documentation is itself an Andromeda application, and is
   managed from the main Andromeda Subversion repository on
   sourceforge:
</p>

<pre>
https://andro.svn.sourceforge.net/svnroot/andro/apps/adocsrobo/trunk
</pre>

<h3>Updating the Documentation</h3>

<p>Because the documentation is itself an Andromeda application,
   it is updated in two main stages, the daily changes and 
   the occassional updates.  The daily steps are:
</p>
<ol><li>The documentor checks out the docs from Subversion.
    <li>The documentor adds, changes, and deletes text and pages.
    <li>The documentor commits the changes to Subversion.
</ol>

<p>Bringing all changes live follows this sequence:</p>
<ol><li>The admin goes to sourceforge and "cuts a release".
    <li>The admin goes to the Node Manager on the documentation host
        and pulls latest code from Subversion.
    <li>The admin runs a code-only (usually) update of the docs.
    <li>The admin logs into the docs app and runs the
        "Build Docs" program.
</ol>

<h3>The Table of Contents</h3>

<p>The top-level table of contents is stored in the file rpTop.php,
   which declares an associative array listing the top-level topics.
   Every top-level item must be listed in this file.
</p>

<p>For manually created topics, the file rpToc.php contains associative
   arrays that list the child topics of each topic.  For topics embedded
   in source code using ROBODOC blocks, the parent/child relationship
   is embedded into the declaration itself.
</p>

<h3>Manually Created Pages</h3>

<p>Manually created pages must contain only HTML.  There is no facility
   for converting other content (such as PHP example code).  Examples
   which contain interpretable elements such as &lt;?php or 
   &lt;script&gt; must be converted into HTML and pasted in.
</p>

<p>The file should contain at the top an H1 element that matches the
   entry made in the Table of Contents files exactly.
</p>

<p>The page must be saved in the application/byhand directory.  The
   file name must end in HTML and
   must match the entry made in the Table of Contents 
   exactly, except that:
</p>
<ul><li>It must be all lower case.
    <li>It must have all spaces removed.
</ul>

<h3>ROBODOC-style Blocks</h3>

<p>The Andromeda documentation allows programmers to document 
   functions, classes, properties and methods directly in code using
   specially formatted comment blocks.  These blocks were originally
   written up for use with ROBODOC, but ROBODOC did not give us enough
   facility to integrate the results with other features, so the
   robophp.php program was written.  This program implements the 
   following ROBODOC features, anything not mentioned is not
   implemented.
</p>

<ul><li>The basic begin/end structure.  A block begins with
    "/****X*  Parent/Child", which is a comment begin "/*", followed
    by three more asterisks, followed by a type designator (explained
    below) another asterisk, and then the topic's parent, a slash,
    and the topic name.  A topic ends with five asterisks on
    a line.
    <li>Inclusion of source code if desired.
    <li>Use of capitalized section names like "FUNCTION", "NAME" etc.
    <li>Use of indentation to indicate text that should be "PRE"
        formatted.
    <li>Use of asterisks to indicate UL lists.
    <li>Scanning of all topics for references to all other topics,
        replacing them with hyperlinks to the appropriate pages.
    <li>Trapping of blocks that have not end-block.
</ul>

<p>In addition, we implement the following features:
</p>
<ul><li>Any PHP, HTML or JavaScript embedded in the block is 
        escaped out for safe display.
    <li>Robophp.php allows for spaces in topic names.
    <li>Disambiguation pages for topics with the same name.
</ul>
    
    
<p>To learn more about these features, examine the examples, or 
   visit the <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html"
   >RoOBODOC home page</a>.
   
<p>ROBODOC uses a letter in the begin block to indicate what kind
   of block it is.  We make use of the following values:
</p>
<ul><li class="arrows">O - (Uppercase letter 'o') Javascript object
    <li class="arrows">F - Javascript factory
    <li class='arrows'>f - functions
    <li class='arrows'>m - methods
    <li class='arrows'>P - class or object properties
    <li class='arrows'>c - class
    <li class='arrows'>M - module (a top-level entry in the table of 
                           contents
    <li class='arrows'>Y - Database definition (table, column etc)
    <li class='arrows'>Z - Database object property (description, type_id etc)
</ul>

<p>General practice is to include the source of any routine that
   is less than 10 or 12 lines.
</p>

<p>For the NAME, we include the full object path where applicable,
   which serves to reinforce the object hierarchy.  For example, the
   method "fireEvent" of the "x6events" object would have a 
   name of "x6events.fireEvent".
</p>

<p>Because Andromeda contains both Javascript and PHP libraries, 
   the first sentence of each topic usually begins by stating the
   relevant API and language of the topic, such as "The PHP method foo is
   used to..." or "The Javascript Object foo is used to..." or
   "The Javascript property foo.bar tracks..."  or even
   "The database definition column defines a column for later
   placement in tables..."
</p>
