            <h1>table.column</h1>
                            
                            <p><br/><br/>In Andromeda we say that we <b>place</b> a column into a table.  The column
must be previously defined with a [[column]] definition.   When the column
is placed into a table any of its properties can be overridden except for
[[type_id]], [[colprec]], [[colscale]] and [[alltables]].
</p>


<div id='example'><div id='extitle'>Example</div>
<div id='exampleinner'><div id='ex2title'></div>
<pre id='ex2inner'>table table_id:
   # ...table property assignments
   column column_id:
      # When placing a column in a table, there are no required properties
      uisearch: Y/N
      primary_key: Y/N
      pk_change: Y/N
      range_from: column_id
      range_to: column_id
      suffix: string
      prefix: string
      # These are properties of a column that can be overridden
      # in each table they are placed in
      description: string
      automation_id: ( FETCH, DISTRIBUTE, SUM ... )
      auto_formula: table.column
      value_min:
      value_max:
      uiro: Y/N
      uino: Y/N
      uicols: numeric
      uirows: numeric
      required: Y/N
      dispsize: numeric
      # These are row-level security
      permrow: Y/N
      table_id_row: string</pre>
</div></div>
<h2>Properties</h2>
<p> 
<b>primary_key</b>.  A Y/N flag that adds the column to the table's primary
key definition.
</p>
<p> 
<b>pk_change</b>.  A Y/N flag that allows a primary key to be changed.
Defaults to no.  This flag must be set for each column in the primary
key.  When a primary key value is updated in the database it will
cascade to all child tables.
</p>
<p><b>range_from</b> and <b>range_to</b> modify the primary key.  These are
discussed below under 'Range Primary Keys'.
</p>
<p> 
<b>uisearch</b>.  A Y/N flag that adds the column to the list of columns
displayed on regular search results.
</p>
<p><b>suffix</b> and <b>prefix</b> are used to modify the column's name.  These
are discussed below under 'Reusing and Renaming columns'.
</p>
<p> 
<b>automation_id</b>.  See the description of <span class="nolink">column#automation_id</span>.
</p>
<p> 
<b>auto_formula</b>.  See the description of <span class="nolink">column#auto_formula</span>.
</p>
<p> 
<b>value_min</b>.  The minimum allowed value for the column.
</p>
<p> 
<b>value_max</b>.  The maximum allowed value for the column.
</p>
<p> 
<b>uiro</b>.  See the description of <span class="nolink">column#uiro</span>.
</p>
<p> 
<b>uino</b>. See the description of <span class="nolink">column#uino</span>.
</p>
<p> 
<b>uicols</b>. See the description of <span class="nolink">column#uicols</span>.
</p>
<p> 
<b>uirows</b>. See the description of <span class="nolink">column#uirows</span>.
</p>
<p> 
<b>required</b>. See the description of <span class="nolink">column#required</span>.
</p>
<p> 
<b>dispsize</b>.  See the description of <span class="nolink">column#dispsize</span>.
</p>
<p> 
<b>uiwithnext</b>.  See the description of <span class="nolink">column#uiwithnext</span>.
</p>
<p> 
<b>permrow</b>.  When this is set to Y, andromeda will only allow a user to
see rows in the table where their user_id matches the value of this
column.  This is the first of two methods for row-level security.  Using
this method, no two users can ever see the same rows.
</p>
<p> 
<b>table_id_row</b>.  This property implement's Andromeda's second method of
row-level security.  This method has the advantage of allowing multiple people
to gain access to the same rows.  When "table_id_row" is set to the name
of a table, then it is assumed that:
</p>
<ul><li> This column must be a foreign key to said table
<li> The parent table contains a column called user_id
<li> A user will be able to see the row if their user_id matches in the
parent table.
</ul>
<h2>A Range Primary Key</h2>
<p>Andromeda allows you to specify that a primary key can cover a <b>range</b> of
values.  Consider the case where you need to define billing rates for your
customers.  The rates change from time to time, but do not follow predictable
patterns like always falling exactly into a year or a month.  So you must
specify that customer X is billed at rate Y from 4/15/07 to 6/1/08, and
at rate Z from 6/2/08 to 12/31/08.  The ranges may not overlap.  This is done
with the 'range_from' and 'range_to' properties.  These must be specified
with the 'primary_key' flag to establish a range:
</p>


<div id='example'><div id='extitle'>Example</div>
<div id='exampleinner'><div id='ex2title'>A billing rates table</div>
<pre id='ex2inner'>table rates:
   foreign_key customers:  # make customers part of primary key
      primary_key: "Y"
   column date_begin:
      suffix: _begin   # 'suffix' is explained in the next section 
      primary_key: "Y"
      range_to: date_end
   column date_end:
      suffix: _end   
      primary_key: "Y"
      range_from: date_begin</pre>
</div></div>
<p>It should be noted hat this feature has been tried by others, but is not
in wide-spread use outside of Andromeda (at least not that we know of).
For this reason it should be expected that the feature itself will become
better defined as it is used by more people, and it should be understood
that best practices have yet to emerge.
</p>
<h2>Re-using and Re-naming Columns</h2>
<p>Andromeda supports the re-use of columns by placing them into tables with
different suffixes or prefixes.  The basic idea is that you may have a
column called 'phone' but you want to put 'fax' and 'cell' into a
table and keep their column names similar and not have to define all
three columns.
</p>
<p>If you make use of Andromeda pre-defined columns and the <span class="nolink">#prefix</span> and
<span class="nolink">#suffix</span> properties then you will actually not need to define that many
columns at all.  Andromeda predefines columns like 'amt' (for amount), and
'date' and 'first_name' and 'description' and so forth.  The following
example from an POS application shows the predefine column 'amt' being
used twice:
</p>
<p>Andromeda does not support the complete renaming of columns, such as
putting a 'phone' column into a table with the name 'cell'.
</p>


<div id='example'><div id='extitle'>Example</div>
<div id='exampleinner'><div id='ex2title'>Making three phone entries</div>
<pre id='ex2inner'>table example:  
   column phone:      # An andromeda pre-defined columns
   column phone_fax:  # specify the complete new column name
      suffix: _fax    # tell us what part of the name is the suffix
   column phone_cell:
      suffix: _cell   
   column pre_phone_suf:  # this is silly, but allowed
      prefix: pre_
      suffix: _suf</pre>
</div></div>
<p> 
</p>                                                    
                            