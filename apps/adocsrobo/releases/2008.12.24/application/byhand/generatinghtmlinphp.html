<h1>Generating HTML In PHP</h1>

<p>The Andromeda philosophy is to eliminate and automate
   as many tasks as possible, but every project will always
   require a little custom work.
   Some of this work will involve generating HTML, so 
   Andromeda needs a simple and clean way to do this.
</p>

<p>The Andromeda HTML library is a very small set of 
   functions that allows you to generate very complex HTML
   without messy "echo" commands, and without a jumble
   of interspersed HTML and PHP. 
</p>

<h2>Introducing The HTML Function</h2>

<p>The basic function for creating an HTML element is 
   simply "html()".  This function returns an object
   that can then contain other HTML elements.  The first
   parameter is the HTML tag, the second parameter is
   the parent (optional) and the third parameter is
   the (optional) innerHTML value.
</p>

<pre><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax10">$div</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">div</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax8">null</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">This</span><span class="syntax13"> </span><span class="syntax13">is</span><span class="syntax13"> </span><span class="syntax13">the</span><span class="syntax13"> </span><span class="syntax13">innerHTML!</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax11">$div</span><span class="syntax6">-&gt;render</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax17">?&gt;</span>
</span></pre>

<p>HTML elements can be nested inside of each other to
   any depth (up to what your hardware can support).  When
   you have finished building your HTML, you always invoke
   the "render" method on the top-most object.  You can
   also use the "renderBuffered" method to capture the
   output.
</p>

<pre><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax10">$table</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">table</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax10">$tr</span>    <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">tr</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax10">$table</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">td</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax10">$tr</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">This</span><span class="syntax13"> </span><span class="syntax13">is</span><span class="syntax13"> </span><span class="syntax13">td</span><span class="syntax13"> </span><span class="syntax13">1</span><span class="syntax13"> </span><span class="syntax13">of</span><span class="syntax13"> </span><span class="syntax13">2</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">td</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax10">$tr</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">This</span><span class="syntax13"> </span><span class="syntax13">is</span><span class="syntax13"> </span><span class="syntax13">td</span><span class="syntax13"> </span><span class="syntax13">2</span><span class="syntax13"> </span><span class="syntax13">of</span><span class="syntax13"> </span><span class="syntax13">2</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>

<span class="syntax4">#</span><span class="syntax4"> </span><span class="syntax4"> </span><span class="syntax4">This</span><span class="syntax4"> </span><span class="syntax4">will</span><span class="syntax4"> </span><span class="syntax4">render</span><span class="syntax4"> </span><span class="syntax4">the</span><span class="syntax4"> </span><span class="syntax4">entire</span><span class="syntax4"> </span><span class="syntax4">table</span>
<span class="syntax11">$table</span><span class="syntax6">-&gt;render</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>

<span class="syntax4">#</span><span class="syntax4"> </span><span class="syntax4"> </span><span class="syntax4">Return</span><span class="syntax4"> </span><span class="syntax4">the</span><span class="syntax4"> </span><span class="syntax4">output</span><span class="syntax4"> </span><span class="syntax4">as</span><span class="syntax4"> </span><span class="syntax4">a</span><span class="syntax4"> </span><span class="syntax4">string</span>
<span class="syntax10">$html</span> <span class="syntax18">=</span> <span class="syntax11">$table</span><span class="syntax6">-&gt;bufferedRender</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax17">?&gt;</span>
</span></pre>

<h2>Setting the inner HTML</h2>

<p>The html object returned by the [[html]]() function has
   a special method, setHTML(), for setting the innerHTML
   of the object.  You can also set it directly by 
   assigning to the "innerHtml" (note capitalization) of the
   object's "hp" array:</p>

<pre><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax10">$div</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">div</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax11">$div</span><span class="syntax6">-&gt;setHtml</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">I</span><span class="syntax14"> </span><span class="syntax14">am</span><span class="syntax14"> </span><span class="syntax14">now</span><span class="syntax14"> </span><span class="syntax14">setting</span><span class="syntax14"> </span><span class="syntax14">innerHTML</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>

<span class="syntax4">#</span><span class="syntax4"> </span><span class="syntax4">Or,</span><span class="syntax4"> </span><span class="syntax4">you</span><span class="syntax4"> </span><span class="syntax4">can</span><span class="syntax4"> </span><span class="syntax4">set</span><span class="syntax4"> </span><span class="syntax4">the</span><span class="syntax4"> </span><span class="syntax4">&quot;hp&quot;</span><span class="syntax4"> </span><span class="syntax4">array</span>
<span class="syntax4">#</span><span class="syntax4"> </span><span class="syntax4"> </span><span class="syntax4">(hp</span><span class="syntax4"> </span><span class="syntax4">standards</span><span class="syntax4"> </span><span class="syntax4">for</span><span class="syntax4"> </span><span class="syntax4">HTML</span><span class="syntax4"> </span><span class="syntax4">Properties)</span>
<span class="syntax11">$div</span><span class="syntax11">-&gt;hp</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">innerHtml</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">=</span> <span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">I</span><span class="syntax13"> </span><span class="syntax13">am</span><span class="syntax13"> </span><span class="syntax13">overwriting</span><span class="syntax13"> </span><span class="syntax13">the</span><span class="syntax13"> </span><span class="syntax13">innerHTML</span><span class="syntax13"> </span><span class="syntax13">set</span><span class="syntax13"> </span><span class="syntax13">above</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">;</span>

<span class="syntax17">?&gt;</span>
</span></pre>
<h2>Setting the CSS Class</h2>

<p>You can assign multiple classes to an object
   using the addClass() method.  
</p>

<pre><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax10">$div</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">div</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax11">$div</span><span class="syntax6">-&gt;addClass</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">class1</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax11">$div</span><span class="syntax6">-&gt;addClass</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">class2</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>

<span class="syntax4">#</span><span class="syntax4"> </span><span class="syntax4"> </span><span class="syntax4">oops,</span><span class="syntax4"> </span><span class="syntax4">let's</span><span class="syntax4"> </span><span class="syntax4">change</span><span class="syntax4"> </span><span class="syntax4">our</span><span class="syntax4"> </span><span class="syntax4">mind:</span>
<span class="syntax11">$div</span><span class="syntax6">-&gt;removeClass</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">class1</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax17">?&gt;</span>
</span></pre>


<h2>Setting Other HTML Attributes</h2>

<p>You can set any HTML attributes by simply assigning
   values to the object's "hp" array, as indicated here:
</p>

<pre><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax10">$textarea</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">textarea</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax11">$textarea</span><span class="syntax11">-&gt;hp</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">tabindex</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">=</span> <span class="syntax5">500</span><span class="syntax18">;</span>
<span class="syntax11">$textarea</span><span class="syntax11">-&gt;hp</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">cols</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">=</span> <span class="syntax5">60</span><span class="syntax18">;</span>
<span class="syntax11">$textarea</span><span class="syntax11">-&gt;hp</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">rows</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">=</span> <span class="syntax5">20</span><span class="syntax18">;</span>
<span class="syntax11">$textarea</span><span class="syntax6">-&gt;render</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax17">?&gt;</span>
</span></pre>
<h2>Setting Custom Attributes</h2>

<p>You can set custom attributes on objects also,
   by making assignments to the object's "ap" array:
</p>

<pre><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax10">$textarea</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">textarea</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax11">$textarea</span><span class="syntax11">-&gt;hp</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">id</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">=</span> <span class="syntax13">'</span><span class="syntax13">customers_notes</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="syntax11">$textarea</span><span class="syntax11">-&gt;ap</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">table_id</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">=</span> <span class="syntax13">'</span><span class="syntax13">customers</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="syntax11">$textarea</span><span class="syntax11">-&gt;ap</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">column_id</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">=</span> <span class="syntax13">'</span><span class="syntax13">notes</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="syntax11">$textarea</span><span class="syntax6">-&gt;render</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax17">?&gt;</span>
</span></pre>
<p>When accessing this object in Javascript, you
   do not need the "getNamedAttributes()" funtion,
   you can access the properties directly:
</p>

<pre><span class="syntax0"><span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Javascript</span><span class="syntax2"> </span><span class="syntax2">example</span><span class="syntax2"> </span>
<span class="syntax8">var</span> widget <span class="syntax18">=</span> $<span class="syntax18">(</span><span class="syntax13">&quot;</span><span class="syntax13">#customers_notes</span><span class="syntax13">&quot;</span><span class="syntax18">)</span><span class="syntax18">[</span><span class="syntax5">0</span><span class="syntax18">]</span><span class="syntax18">;</span>
<span class="syntax6">alert</span><span class="syntax18">(</span>widget<span class="syntax18">.</span>table_id<span class="syntax18">)</span><span class="syntax18">;</span>

</span></pre>

<h2>A Shortcut for Void Hyperlinks</h2>

<p>Sometimes you want to create hyperlinks with
   no href, and then put the action into the click
   event.  You can do this by creating an "A-VOID"
   element:
</p>

<pre><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax10">$a</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">a-void</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax11">$a</span><span class="syntax11">-&gt;hp</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">onclick</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">=</span><span class="syntax13">'</span><span class="syntax13">javascript:alert(&quot;In</span><span class="syntax13"> </span><span class="syntax13">the</span><span class="syntax13"> </span><span class="syntax13">onclick!&quot;)</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="syntax17">?&gt;</span>
</span></pre>
<h2>Creating Multiple Elements</h2>

<p>You can pass in an array of values to the
   html function and it will make one element
   for each.  When you do this the return value
   is an array:
</p>

<pre><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax10">$row</span> <span class="syntax18">=</span> <span class="syntax6">SQL_OneRow</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">Select</span><span class="syntax14"> </span><span class="syntax14">*</span><span class="syntax14"> </span><span class="syntax14">from</span><span class="syntax14"> </span><span class="syntax14">customers</span><span class="syntax14"> </span><span class="syntax14">where</span><span class="syntax14"> </span><span class="syntax14">skey</span><span class="syntax14">=</span><span class="syntax14">5</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>

<span class="syntax10">$table</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">table</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax10">$tr</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">tr</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax10">$table</span><span class="syntax18">)</span><span class="syntax18">;</span>

<span class="syntax4">#</span><span class="syntax4"> </span><span class="syntax4">$aTr</span><span class="syntax4"> </span><span class="syntax4">will</span><span class="syntax4"> </span><span class="syntax4">be</span><span class="syntax4"> </span><span class="syntax4">an</span><span class="syntax4"> </span><span class="syntax4">array</span><span class="syntax4"> </span><span class="syntax4">of</span><span class="syntax4"> </span><span class="syntax4">td</span><span class="syntax4"> </span><span class="syntax4">objects</span>
<span class="syntax10">$aTr</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">td</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax10">$tr</span><span class="syntax18">,</span><span class="syntax10">$row</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax17">?&gt;</span>
</span></pre>

<h2>Creating Inputs</h2>

<p>The html() function can be used to generate your own
   input elements, but there is also a special function
   that uses the Data Dictionary to generate inputs that
   completely respect the data dictionary.  This is
   the "input()" function, which returns either an
   HTML INPUT, and HTML TEXTAREA, or an HTML SELECT
   depending on the column you pass in:
</p>

<p>The input's ID and several extended parameters are 
   set automatically.  You must set a tab index.

<pre><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax10">$customers_dd</span> <span class="syntax18">=</span> <span class="syntax6">ddTable</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">customers</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>

<span class="syntax10">$table</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">table</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax10">$tabindex</span> <span class="syntax18">=</span> <span class="syntax5">500</span><span class="syntax18">;</span>
<span class="syntax8">foreach</span><span class="syntax18">(</span><span class="syntax10">$customers_dd</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">flat</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax8">as</span> <span class="syntax10">$colname</span><span class="syntax18">=</span><span class="syntax18">&gt;</span><span class="syntax10">$colinfo</span><span class="syntax18">)</span> <span class="syntax18">{</span>
    <span class="syntax10">$tr</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">tr</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax10">$table</span><span class="syntax18">)</span><span class="syntax18">;</span>

    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">First</span><span class="syntax2"> </span><span class="syntax2">column</span><span class="syntax2"> </span><span class="syntax2">is</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">description</span>
    <span class="syntax10">$td</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">td</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax10">$tr</span><span class="syntax18">,</span><span class="syntax10">$colinfo</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">description</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">)</span><span class="syntax18">;</span>

    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Second</span><span class="syntax2"> </span><span class="syntax2">column</span><span class="syntax2"> </span><span class="syntax2">is</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">input</span>
    <span class="syntax10">$input</span> <span class="syntax18">=</span> <span class="syntax6">input</span><span class="syntax18">(</span><span class="syntax10">$colinfo</span><span class="syntax18">)</span><span class="syntax18">;</span>
    <span class="syntax11">$input</span><span class="syntax11">-&gt;hp</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">tabindex</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">=</span> <span class="syntax18">+</span><span class="syntax18">+</span><span class="syntax10">$tabindex</span><span class="syntax18">;</span>
    <span class="syntax10">$td</span> <span class="syntax18">=</span> <span class="syntax6">html</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">td</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax10">$tr</span><span class="syntax18">,</span><span class="syntax11">$input</span><span class="syntax6">-&gt;bufferedRender</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="syntax18">}</span>
<span class="syntax17">?&gt;</span>
</span></pre>


