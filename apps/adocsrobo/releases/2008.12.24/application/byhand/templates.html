            <h1>Templates</h1>
                            
                            <P CLASS="Textbody">Andromeda follows a set of conventions that are taken from the Joomla! Content Management system. We do this for the simple reason that it lets us use Joomla! templates for the "public face" of Andromeda applications. You do not have to use Joomla! templates of course, you can take your own designs and put them into this format and use them.</P><P CLASS="Textbody">By templates we do not mean something like Smarty, where you make a non-PHP page to lay out a single page. Andromeda uses the word in the same sense as most of the web industry, to mean a main HTML page and supporting CSS and possibly JS files that give the site its overall look and feel.</P><H2 CLASS="Heading2"><A NAME="Setting_The_Template"></A>Setting The Template</H2><P CLASS="Textbody">If you have more than one template, you have to explicitly tell the system which one to use. One very common approach is to use the default Andromeda template for people who are logged in, and to use some specially designed template for visitors to a site. This gives your site two different "faces", a public face and a private face.</P><P CLASS="Textbody">You can achieve that effect by putting the file "applib.php" into your application directory and putting the following code into it:</P><P CLASS="Textbody"><pre class="php"><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">This</span><span class="syntax2"> </span><span class="syntax2">code</span><span class="syntax2"> </span><span class="syntax2">goes</span><span class="syntax2"> </span><span class="syntax2">at</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">top</span><span class="syntax2"> </span><span class="syntax2">of</span><span class="syntax2"> </span><span class="syntax2">'applib.php'</span><span class="syntax2"> </span><span class="syntax2">in</span><span class="syntax2"> </span>
<span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">your</span><span class="syntax2"> </span><span class="syntax2">application</span><span class="syntax2"> </span><span class="syntax2">directory.</span>
<span class="syntax8">if</span>(<span class="syntax6">LoggedIn</span>()) <span class="syntax18">{</span>
    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Logged</span><span class="syntax2"> </span><span class="syntax2">in</span><span class="syntax2"> </span><span class="syntax2">users</span><span class="syntax2"> </span><span class="syntax2">should</span><span class="syntax2"> </span><span class="syntax2">get</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">Andromeda</span>
    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">default</span><span class="syntax2"> </span><span class="syntax2">template</span>
    <span class="syntax6">SessionSet</span>(<span class="syntax13">'</span><span class="syntax13">TEMPLATE</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">rt_pixel</span><span class="syntax13">'</span>)<span class="syntax18">;</span>
<span class="syntax18">}</span>
<span class="syntax8">else</span> <span class="syntax18">{</span>
    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">public</span><span class="syntax2"> </span><span class="syntax2">users</span><span class="syntax2"> </span><span class="syntax2">get</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">other</span><span class="syntax2"> </span><span class="syntax2">template</span>
    <span class="syntax6">SessionSet</span>(<span class="syntax13">'</span><span class="syntax13">TEMPLATE</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">sexy_branded_template</span><span class="syntax13">'</span>)<span class="syntax18">;</span>
<span class="syntax18">}</span>
<span class="syntax17">?&gt;</span>
</span></pre>
</P><H2 CLASS="Heading2"><A NAME="Required_Andromeda_Styles"></A>Required Andromeda Styles</H2><P CLASS="Textbody">Whether you are providing your own files, or using a Joomla template, you should copy the file "x2.css" from the default Andromeda template, "rt_pixel", into your new template, and modify the styles as necessary to maintain uniformity.</P><H2 CLASS="Heading2"><A NAME="A_Non-Joomla_Template"></A>A Non-Joomla Template</H2><P CLASS="Textbody">Each template goes into a subdirectory of the application's "templates" directory, even if there is only one template.</P><P CLASS="Textbody">Andromeda expects to find the file "index.php" at the root level of the template. This is the master file for the template.</P><P CLASS="Textbody">The template should have a function call to [[mosMainBody]] in the main content area. Other content areas, such as sidebars, header and footers, and so forth are called "modules" (not to be confused with database modules). Each of those can contain code that more or less looks like the following:</P><P CLASS="Textbody"><pre class="php"><span class="syntax0"><span class="syntax17">&lt;?php</span> <span class="syntax8">if</span>(<span class="syntax6">mosCountModules</span>(<span class="syntax13">'</span><span class="syntax13">module_x</span><span class="syntax13">'</span>)) <span class="syntax18">{</span> <span class="syntax17">?&gt;</span>
    <span class="syntax17">&lt;</span><span class="syntax17">div</span><span class="syntax17"> </span><span class="syntax17">id</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">module_x</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
        <span class="syntax17">&lt;?</span><span class="syntax18">=</span><span class="syntax6">mosLoadModules</span>(<span class="syntax13">'</span><span class="syntax13">module_x</span><span class="syntax13">'</span>)<span class="syntax17">?&gt;</span>
    <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">div</span><span class="syntax17">&gt;</span>
<span class="syntax17">&lt;?php</span> <span class="syntax18">}</span> <span class="syntax17">?&gt;</span>
</span></pre>
</P><P CLASS="Textbody">Other than that, you can put your CSS or JS files anywhere you wish.</P><H2 CLASS="Heading2"><A NAME="Using_a_Joomla_Template"></A>Using a Joomla Template</H2><P CLASS="Textbody">To use a Joomla template, unpack it into the templates directory of the application.</P><P CLASS="Textbody">As of this writing, October 2007 we cannot say for sure that we have aliased every function you will find in a Joomla template. In most cases we have to use a little trial-and-error to find function calls in the template that are not being handled.</P><P CLASS="Textbody">The biggest job in adopting any Joomla template usually has to do with the menu. If the menu is making direct database calls to the Joomla database then it simply will not work. Cases like this usually require a hard-coded menu be supplied to the code.</P>            
 
                                        
                            