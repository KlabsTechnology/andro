            <h1>Forms, Get and Post</h1>
                            
                            <P CLASS="Textbody">It is not necessary in Andromeda to ever put an HTML FORM element into your custom HTML because Andromeda always wraps the main content area in an HTML FORM. You can put a file upload input directly into this form as well with no special features.</P><H2 CLASS="Heading2"><A NAME="A_Custom_Page_With_A_Form"></A>A Custom Page With A Form</H2><P CLASS="Textbody">Because Andromeda always wraps the main output in an HTML FORM, you do not ever need to put on into your code. This example is not complete enough to actually work, but it does show that you do not need a form:</P><P CLASS="Textbody"><pre class="php"><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax1">#</span><span class="syntax1"> </span><span class="syntax1">This</span><span class="syntax1"> </span><span class="syntax1">is</span><span class="syntax1"> </span><span class="syntax1">file</span><span class="syntax1"> </span><span class="syntax1">public_items</span>
<span class="syntax8">class</span><span class="syntax8"> </span><span class="syntax11">public_items</span><span class="syntax11"> </span><span class="syntax8">extends</span><span class="syntax11"> </span><span class="syntax11">x_table2</span><span class="syntax11"> </span><span class="syntax18">{</span>
    <span class="syntax8">function</span> <span class="syntax9">main</span>() <span class="syntax18">{</span>
        <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">This</span><span class="syntax2"> </span><span class="syntax2">example</span><span class="syntax2"> </span><span class="syntax2">shows</span><span class="syntax2"> </span><span class="syntax2">only</span><span class="syntax2"> </span><span class="syntax2">that</span><span class="syntax2"> </span><span class="syntax2">you</span><span class="syntax2"> </span><span class="syntax2">do</span><span class="syntax2"> </span><span class="syntax2">not</span>
        <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">need</span><span class="syntax2"> </span><span class="syntax2">an</span><span class="syntax2"> </span><span class="syntax2">HTML</span><span class="syntax2"> </span><span class="syntax2">form,</span><span class="syntax2"> </span><span class="syntax2">there</span><span class="syntax2"> </span><span class="syntax2">is</span><span class="syntax2"> </span><span class="syntax2">not</span><span class="syntax2"> </span><span class="syntax2">enough</span>
        <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">here</span><span class="syntax2"> </span><span class="syntax2">yet</span><span class="syntax2"> </span><span class="syntax2">for</span><span class="syntax2"> </span><span class="syntax2">it</span><span class="syntax2"> </span><span class="syntax2">to</span><span class="syntax2"> </span><span class="syntax2">actually</span><span class="syntax2"> </span><span class="syntax2">work.</span>
        <span class="syntax17">?&gt;</span>
        Your favorite color: <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">name</span><span class="syntax18">=</span><span class="syntax13">'</span><span class="syntax13">color</span><span class="syntax13">'</span><span class="syntax17">&gt;</span>
        <span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
        <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">submit</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>Save<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">input</span><span class="syntax17">&gt;</span>
        <span class="syntax17">&lt;?php</span>
    <span class="syntax18">}</span>
<span class="syntax18">}</span>
<span class="syntax17">?&gt;</span>
</span></pre>
</P><P CLASS="Textbody">In order to make this form actually work, we need to tell it what page to post to. If we want to handle the processing inside of public_items.php, we must set the value of gp_page as a hidden variable. We could do this with explicit HTML, but it is better to use the Andromeda PHP function [[hidden]] to set the value. Our example is now a little better, it looks like this:</P><P CLASS="Textbody"><pre class="php"><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax1">#</span><span class="syntax1"> </span><span class="syntax1">This</span><span class="syntax1"> </span><span class="syntax1">is</span><span class="syntax1"> </span><span class="syntax1">file</span><span class="syntax1"> </span><span class="syntax1">public_items</span>
<span class="syntax8">class</span><span class="syntax8"> </span><span class="syntax11">public_items</span><span class="syntax11"> </span><span class="syntax8">extends</span><span class="syntax11"> </span><span class="syntax11">x_table2</span><span class="syntax11"> </span><span class="syntax18">{</span>
    <span class="syntax8">function</span> <span class="syntax9">main</span>() <span class="syntax18">{</span>
        <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">This</span><span class="syntax2"> </span><span class="syntax2">puts</span><span class="syntax2"> </span><span class="syntax2">a</span><span class="syntax2"> </span><span class="syntax2">hidden</span><span class="syntax2"> </span><span class="syntax2">variable</span><span class="syntax2"> </span><span class="syntax2">onto</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">form.</span><span class="syntax2"> </span><span class="syntax2">When</span><span class="syntax2"> </span><span class="syntax2">it</span>
        <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">is</span><span class="syntax2"> </span><span class="syntax2">POSTed,</span><span class="syntax2"> </span><span class="syntax2">it</span><span class="syntax2"> </span><span class="syntax2">will</span><span class="syntax2"> </span><span class="syntax2">return</span><span class="syntax2"> </span><span class="syntax2">to</span><span class="syntax2"> </span><span class="syntax2">public_items</span><span class="syntax2"> </span><span class="syntax2">for</span><span class="syntax2"> </span><span class="syntax2">processing</span>
        <span class="syntax6">hidden</span>(<span class="syntax13">'</span><span class="syntax13">gp_page</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">public_items</span><span class="syntax13">'</span>)<span class="syntax18">;</span>
        <span class="syntax17">?&gt;</span>
        Your favorite color: <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">name</span><span class="syntax18">=</span><span class="syntax13">'</span><span class="syntax13">color</span><span class="syntax13">'</span><span class="syntax17">&gt;</span>
        <span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
        <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">submit</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>Save<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">input</span><span class="syntax17">&gt;</span>
        <span class="syntax17">&lt;?php</span>
    <span class="syntax18">}</span>
<span class="syntax18">}</span>
<span class="syntax17">?&gt;</span>
</span></pre>
</P><P CLASS="Textbody">We still have one problem. When the user submits the form, it will come right back to the original page without doing anything. We need to put another hidden variable onto the form, some type of flag that will tell us we are coming in on a Form Post. This skeleton code now has enough for us to get going:</P><P CLASS="Textbody"><pre class="php"><span class="syntax0"><span class="syntax17">&lt;?php</span>
<span class="syntax1">#</span><span class="syntax1"> </span><span class="syntax1">This</span><span class="syntax1"> </span><span class="syntax1">is</span><span class="syntax1"> </span><span class="syntax1">file</span><span class="syntax1"> </span><span class="syntax1">public_items</span>
<span class="syntax8">class</span><span class="syntax8"> </span><span class="syntax11">public_items</span><span class="syntax11"> </span><span class="syntax8">extends</span><span class="syntax11"> </span><span class="syntax11">x_table2</span><span class="syntax11"> </span><span class="syntax18">{</span>
    <span class="syntax8">function</span> <span class="syntax9">main</span>() <span class="syntax18">{</span>
        <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">If</span><span class="syntax2"> </span><span class="syntax2">we</span><span class="syntax2"> </span><span class="syntax2">are</span><span class="syntax2"> </span><span class="syntax2">coming</span><span class="syntax2"> </span><span class="syntax2">in</span><span class="syntax2"> </span><span class="syntax2">from</span><span class="syntax2"> </span><span class="syntax2">a</span><span class="syntax2"> </span><span class="syntax2">FORM</span><span class="syntax2"> </span><span class="syntax2">POST,</span><span class="syntax2"> </span><span class="syntax2">this</span><span class="syntax2"> </span>
        <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">property</span><span class="syntax2"> </span><span class="syntax2">will</span><span class="syntax2"> </span><span class="syntax2">be</span><span class="syntax2"> </span><span class="syntax2">set</span>
        <span class="syntax8">if</span>(<span class="syntax6">gp</span>(<span class="syntax13">'</span><span class="syntax13">postflag</span><span class="syntax13">'</span>)<span class="syntax18">=</span><span class="syntax18">=</span><span class="syntax5">1</span>) <span class="syntax18">{</span>
            <span class="syntax11">$this</span><span class="syntax6">-&gt;processPost</span>()<span class="syntax18">;</span>
            <span class="syntax8">return</span><span class="syntax18">;</span>
        <span class="syntax18">}</span>
        
        <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Tell</span><span class="syntax2"> </span><span class="syntax2">it</span><span class="syntax2"> </span><span class="syntax2">what</span><span class="syntax2"> </span><span class="syntax2">page</span><span class="syntax2"> </span><span class="syntax2">to</span><span class="syntax2"> </span><span class="syntax2">go</span><span class="syntax2"> </span><span class="syntax2">to,</span><span class="syntax2"> </span><span class="syntax2">and</span><span class="syntax2"> </span><span class="syntax2">tell</span><span class="syntax2"> </span><span class="syntax2">it</span>
        <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">that</span><span class="syntax2"> </span><span class="syntax2">we</span><span class="syntax2"> </span><span class="syntax2">are</span><span class="syntax2"> </span><span class="syntax2">posting</span><span class="syntax2"> </span><span class="syntax2">a</span><span class="syntax2"> </span><span class="syntax2">form.</span><span class="syntax2"> </span><span class="syntax2"> </span><span class="syntax2">You</span><span class="syntax2"> </span><span class="syntax2">can</span><span class="syntax2"> </span><span class="syntax2">use</span>
        <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">any</span><span class="syntax2"> </span><span class="syntax2">name</span><span class="syntax2"> </span><span class="syntax2">you</span><span class="syntax2"> </span><span class="syntax2">want</span><span class="syntax2"> </span><span class="syntax2">for</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">post</span><span class="syntax2"> </span><span class="syntax2">flag</span>
        <span class="syntax6">hidden</span>(<span class="syntax13">'</span><span class="syntax13">gp_page</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">public_items</span><span class="syntax13">'</span>)<span class="syntax18">;</span>
        <span class="syntax6">hidden</span>(<span class="syntax13">'</span><span class="syntax13">postflag</span><span class="syntax13">'</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">1</span><span class="syntax13">'</span>)<span class="syntax18">;</span>
        <span class="syntax17">?&gt;</span>
        Your favorite color: <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">name</span><span class="syntax18">=</span><span class="syntax13">'</span><span class="syntax13">color</span><span class="syntax13">'</span><span class="syntax17">&gt;</span>
        <span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
        <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">submit</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>Save<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">input</span><span class="syntax17">&gt;</span>
        <span class="syntax17">&lt;?php</span>
    <span class="syntax18">}</span>
    
    <span class="syntax8">function</span> <span class="syntax6">processPost</span>() <span class="syntax18">{</span>
        <span class="syntax17">?&gt;</span>
        Your favorite color is <span class="syntax17">&lt;?</span><span class="syntax18">=</span><span class="syntax6">gp</span>(<span class="syntax13">'</span><span class="syntax13">color</span><span class="syntax13">'</span>)<span class="syntax17">?&gt;</span>, thanks 
        for participating!
        <span class="syntax17">&lt;?php</span>
    <span class="syntax18">}</span>
<span class="syntax18">}</span>
<span class="syntax17">?&gt;</span>
</span></pre>
</P><H2 CLASS="Heading2"><A NAME="Get_and_Post_Parameters"></A>Get and Post Parameters</H2><P CLASS="Textbody">Andromeda considers GET and POST parameters to be the same, and enforces no rules on when you must use on or the other. In fact, Andromeda actually merges them together into one array which you can access with the [[gp]] function.</P><P CLASS="Textbody">Specifically, Andromeda copies the $_POST array into its own array, then it merges this array with the $_GET array, so that $_GET variables override $_POST variables of the same name. Andromeda also un-escapes them if they have been escaped, since they are escaped by different methods later on depending on whether they are going to the browser or the database.</P><P CLASS="Textbody">The Get/Post overlay can be very useful when you are debugging, because you can simulate an entry form by typing in a url like "&x2t_column_name=value&x2t_another_column=value" and it will be processed the same as if an HTML FORM had been POSTed.</P><P CLASS="Textbody">Our page on [[GET-POST Variables]] contains a complete rundown of all of the ways you can manipulate the query string.</P>            
 
                                        
                            