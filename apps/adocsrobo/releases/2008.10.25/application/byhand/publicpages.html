            <h1>Public Pages</h1>
                            
                            <P CLASS="Textbody">Andromeda can be used to build public sites, internal "desktop-style" sites, or combination sites that have separate public and private faces.</P><P CLASS="Textbody">When a page is viewable by a person who has not logged in we call that a "public" page. A typical example would be an online catalog. All of the table maintenance pages, where users enter items, prices, and the like are private pages that require a login. But visitors to the site can browse through the catalog on public pages.</P><H2 CLASS="Heading2"><A NAME="Web_Security_and_Public_Pages"></A>Web Security and Public Pages</H2><P CLASS="Textbody">A public page must be registered. This is because Andromeda operates on a Deny-by-default security model, and unless the page is registered, Andromeda will send people to the login page instead of the page itself.</P><span class="alert">Registering a page as public does not affect database security. If a public page attempts to access a table that requires a privileged login, it will receive an error from the database server!</span><P CLASS="Textbody">Register a public page by adding it to the global array $MPPages. The <SPAN CLASS="T1">index</SPAN><SPAN CLASS="T2"> of this array is how you register it, not the value. The value can be anything and is ignored.</SPAN></P><P CLASS="P2"><pre class="php"><span class="syntax0"><span class="syntax8">global</span> <span class="syntax10">$</span><span class="syntax10">MPPages</span><span class="syntax18">;</span>
<span class="syntax10">$</span><span class="syntax10">MPPages</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">pagename_1</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">=</span><span class="syntax5">1</span><span class="syntax18">;</span>
<span class="syntax10">$</span><span class="syntax10">MPPages</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">pagename_2</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">=</span><span class="syntax5">1</span><span class="syntax18">;</span>
    
</span></pre>
</P><H2 CLASS="Heading2"><A NAME="Database_Security_and_Public_Pages"></A>Database Security and Public Pages</H2><P CLASS="Textbody">If you have public pages, then presumably your program will be accessing tables in the database. Before you can do this you must grant access to those tables to the general public.</P><P CLASS="Textbody">Here is how it works.  When a visitor comes to your public Andromeda site, and the user has not logged in, then Andromeda will connect to the database with a username that has the same name as the database, and a password that has the same name as the database. This is called the "public" user and unless you give it some privileges the absolute only thing it can do is connect to the database, after that it cannot see even one table.</P><P CLASS="Textbody">So the first thing we might do is grant this user read-only access to the items table. When you grant access to the public user, we use the special designation "$LOGIN" as the group name, as in this example:</P><P CLASS="Textbody"><pre class="ddyaml"><span class="syntax0"><span class="syntax10">table</span><span class="syntax10"> </span><span class="syntax10">items:</span>
<span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax8"> </span><span class="syntax8">module:</span><span class="syntax13"> </span><span class="syntax13">inventory</span>
<span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax8"> </span><span class="syntax8">description:</span><span class="syntax13"> </span><span class="syntax13">items</span>
<span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13">group</span><span class="syntax13"> </span><span class="syntax7">$LOGIN</span><span class="syntax13">:</span>
<span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax8"> </span><span class="syntax8">permsel:</span><span class="syntax13"> </span><span class="syntax13">&quot;</span><span class="syntax13">Y</span><span class="syntax13">&quot;</span>
</span></pre>
<P class="Textbody">This can also be done at the module definition level with by doing the following:</p>
<pre class="ddyaml"><span class="syntax0"><span class="syntax10">module inventory:</span>
<span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax8"> </span><span class="syntax8">uisort:</span><span class="syntax13"> </span><span class="syntax13">100</span>
<span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax8"> </span><span class="syntax8">description:</span><span class="syntax13"> </span><span class="syntax13">Inventory</span>
<span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13">group</span><span class="syntax13"> </span><span class="syntax7">$LOGIN</span><span class="syntax13">:</span>
<span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax8"> </span><span class="syntax8">permsel:</span><span class="syntax13"> </span><span class="syntax13">&quot;</span><span class="syntax13">Y</span><span class="syntax13">&quot;</span>
</span></pre>
</P><P CLASS="Textbody"></P>            
 
                                        
                            
